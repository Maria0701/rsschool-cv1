(()=>{"use strict";var e=function(e,t){return fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return t(e)}))},t=function(e,t){return Math.floor(Math.random()*(t-e)+e)};function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.elt=null,this.url=n,this.overlay=document.querySelector(".overlay"),this.closeElt=null,this.closeHandler=this.closeHandler.bind(this),this.callback=this.callback.bind(this),this.init()}var r,i;return r=t,i=[{key:"init",value:function(){return e(this.url,this.callback)}},{key:"callback",value:function(e){var t=this,n=e.find((function(e){return e.id===t.id}));this.appendElt(this.createElt(n)),this.overlay&&this.overlay.classList.add("overlay--active"),this.startEventListeners()}},{key:"appendElt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.querySelector("body");return t.append(e)}},{key:"startEventListeners",value:function(){this.closeElt=this.elt.querySelector(".popup__button"),this.overlay.addEventListener("click",this.closeHandler),this.closeElt.addEventListener("click",this.closeHandler)}},{key:"closeHandler",value:function(){this.overlay&&this.overlay.classList.remove("overlay--active"),this.overlay.removeEventListener("click",this.closeHandler),this.closeElt=null,this.elt.parentNode.removeChild(this.elt),this.elt=null}},{key:"createElt",value:function(e){var t,n,r,i,a,c,o,l,s,d;return this.elt=document.createElement("div"),this.elt.classList.add("popup"),this.elt.insertAdjacentHTML("beforeend",(n=(t=e).img,r=t.name,i=t.type,a=t.breed,c=t.description,o=t.age,l=t.inoculations,s=t.diseases,d=t.parasites,'\n        <button class="popup__button button-circle">\n            <svg width="12" height="12">\n                <use xlink:href="img/sprite.svg#icon-cross"></use>\n            </svg>\n        </button>\n        <div class="popup__img-wrapper">\n            <img class="popup__img" src="'.concat(n,'" alt="').concat(r,'">\n        </div>\n        <div class="popup__content">\n            <div class="popup__name">').concat(r,'</div>\n            <div class="popup__kind">').concat(i," - ").concat(a,'</div>\n            <div class="popup__text">').concat(c,'</div>\n            <ul class="popup__list">\n                <li class="popup__item">Age: <span>').concat(o,'</span></li>\n                <li class="popup__item">Inoculations: <span>').concat(l.join(", "),'</span></li>\n                <li class="popup__item">Diseases: <span>').concat(s.join(", "),'</span></li>\n                <li class="popup__item">Parasites: <span>').concat(d.join(", "),"</span></li>\n            </ul>\n        </div>\n    "))),this.elt}}],i&&n(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),t}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,t),this.container=e,this.url=n,this.id=r,this.elt=null,this.callback=this.callback.bind(this)}var n,r;return n=t,r=[{key:"init",value:function(){return e(this.url,this.callback)}},{key:"callback",value:function(e){var t=this,n=e.find((function(e){return e.id===t.id}));this.createTemplate(n)}},{key:"createTemplate",value:function(e){var t=e.pet,n=void 0===t?null:t,r=e.place,i=void 0===r?"after":r,a=e.tagName,c=void 0===a?"div":a,o=e.className,l=void 0===o?"slider__item":o,s=e.where,d=void 0===s?"beforeend":s,u=this.createElementContent(n),v=this.createElt(c,l,d,u);"before"===i?this.prependElt(v,this.container):this.appendElt(v,this.container)}},{key:"appendElt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.querySelector("body");return t.append(e)}},{key:"prependElt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.querySelector("body");return t.prepend(e)}},{key:"createElementContent",value:function(e){return n=(t=e).id,r=t.img,i=t.name,'\n    <a href="#" class="friend-card" title="friend-name" data-id="'.concat(n,'">\n        <div class="friend__img-wrapper">\n            <img src="').concat(r,'" class="friend__img">\n        </div>    \n        <div class="friend__description">\n            <span class="friend__name">').concat(i,'</span>\n            <button class="button button--light friend__button">\n                Learn more\n            </button>\n        </div>    \n    </a>');var t,n,r,i}},{key:"createElt",value:function(e,t,n,r){return this.elt=document.createElement(e),this.elt.classList.add(t),this.elt.insertAdjacentHTML(n,r),this.elt}},{key:"removeElt",value:function(){this.elt.parentNode.removeChild(this.elt)}}],r&&a(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),o=function(e){var t;switch(e){case"slider":t=window.matchMedia("(max-width: 767px)").matches?1:window.matchMedia("(max-width: 1279px)").matches?2:3;break;case"catalog":t=window.matchMedia("(max-width: 767px)").matches?3:window.matchMedia("(max-width: 1279px)").matches?6:8;break;default:alert("Нет таких значений")}return t};function l(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u="http://localhost:3000/js/pets.json",v=document.querySelector(".slider__list");try{var p=document.querySelector(".js-toggler"),f=document.querySelector(".header__menu");p&&f&&function(e,t,n,r){var i=document.querySelector(".header"),a=document.querySelector(".overlay"),c=e;function o(e){t.contains(e.target)||l()}function l(){i.classList.remove("opened"),c.removeEventListener("click",l),a.removeEventListener("click",o),e.addEventListener("click",s),a.classList.remove("overlay--active")}function s(){var t;(t=document.querySelector(".opened"))&&t!==i&&t.classList.remove("opened"),i.classList.add("opened"),e.removeEventListener("click",s),c.addEventListener("click",l),a.addEventListener("click",o),a.classList.add("overlay--active")}e.addEventListener("click",s)}(p,f)}catch(e){console.log(e)}try{var h=document.querySelectorAll(".menu__link"),m=h.length;h.forEach((function(e,t){t!==m-1&&t!==m-2||("click",e.addEventListener("click",(function(e){e.preventDefault()})))}))}catch(e){console.log(e)}try{v&&v.addEventListener("click",(function(e){var t=e.target.closest(".friend-card");if(t){e.preventDefault();var n=Number(t.dataset.id);new r(n,u)}}))}catch(e){console.log(e)}try{v&&function(n,r){var i=[],a=[],l=o("slider"),s=2*l;e(r,(function(e){for(;i.length<s;){var r=t(1,e.length);if(!i.includes(r)){i.push(r);var o=e.find((function(e){return e.id===r})),l=new c(n);l.createTemplate({pet:o,tagName:"div",className:"slider__item"}),a.push(l)}}return i}));var u=document.querySelectorAll(".slider__arrow");function v(e){if(u.forEach((function(e){return e.removeEventListener("click",v)})),e.target.closest(".slider__arrow-right")){n.classList.add("transition-right"),console.log(l);for(var t=0;t<l;t++)n.append(n.children[0])}e.target.closest(".slider__arrow-left")&&n.classList.add("transition-left")}u.forEach((function(e){return e.addEventListener("click",v)})),n.addEventListener("animationend",(function(o){var p;"move-left"===o.animationName&&n.classList.remove("transition-left"),"move-right"===o.animationName&&n.classList.remove("transition-right"),i.slice(0,l),i=i.slice(0,l),(p=a.slice(-l),function(e){if(Array.isArray(e))return d(e)}(p)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(p)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){e.removeElt()})),a=a.slice(0,l),e(r,(function(e){for(;i.length<s;){var o=t(1,e.length);if(!i.includes(o)){i.unshift(o);var l=e.find((function(e){return e.id===o})),d=new c(n,r,o);d.createTemplate({pet:l,place:"before",tagName:"div",className:"slider__item"}),a.unshift(d)}}return i})),u.forEach((function(e){return e.addEventListener("click",v)}))}))}(v,u)}catch(e){console.log(e)}try{var y=document.querySelector(".catalog__cards"),b=document.querySelector(".pagination");y&&(y.innerHTML="",function(t,n){var r=o("catalog"),i=n.querySelector(".first"),a=n.querySelector(".last"),s=n.querySelector(".prev"),d=n.querySelector(".next"),u=n.querySelector(".num"),v=1,p=r,f=48/p,h=1,m=[],y=[],b=function(e){console.log(h,p);for(var t=h;t<=p*v;t++){var n=e[t-1];g(n)}},g=function(e){var n=new c(t);y.push(n),n.createTemplate({pet:e,tagName:"article",className:"catalog__card"})};e("http://localhost:3000/js/pets.json",(function(e){return m=[].concat(l(e),l(e),l(e),l(e),l(e),l(e))})).then((function(e){m=e,b(e)}));var E=function e(t){t.preventDefault(),[].concat(y).forEach((function(e){e.removeElt(),y.shift()}));var n=t.target;switch(!0){case d.contains(n):v++,h+=p;break;case s.contains(n):v--,h-=p;break;case i.contains(n):v=1,h=1;break;case a.contains(n):v=f,h=48-p+1}v>1&&(i.dataset.disabled=!1,s.dataset.disabled=!1,d.addEventListener("click",e),s.addEventListener("click",e),i.addEventListener("click",e),a.addEventListener("click",e)),v<f&&(a.dataset.disabled=!1,d.dataset.disabled=!1,d.addEventListener("click",e),s.addEventListener("click",e),i.addEventListener("click",e),a.addEventListener("click",e)),v===f&&(a.dataset.disabled=!0,d.dataset.disabled=!0,d.removeEventListener("click",e),a.removeEventListener("click",e)),1===v&&(s.dataset.disabled=!0,i.dataset.disabled=!0,s.removeEventListener("click",e),i.removeEventListener("click",e)),u.innerText=v,b(m)};d.addEventListener("click",E),a.addEventListener("click",E)}(y,b))}catch(e){console.log(e)}})();