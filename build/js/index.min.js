(()=>{"use strict";var e=function(e,t){return fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){t(e)}))},t=function(e,t){return Math.floor(Math.random()*(t-e)+e)};function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(){function t(e,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.url=n,this.id=i,this.elt=null,this.callback=this.callback.bind(this)}var i,r;return i=t,r=[{key:"init",value:function(){return e(this.url,this.callback)}},{key:"callback",value:function(e){var t=this,n=e.find((function(e){return e.id===t.id}));this.createTemplate(n)}},{key:"createTemplate",value:function(e,t){var n=this.createElementContent(e),i=this.createElt("div","slider__item","beforeend",n);"before"===t?this.prependElt(i,this.container):this.appendElt(i,this.container)}},{key:"appendElt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.querySelector("body");return t.append(e)}},{key:"prependElt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.querySelector("body");return t.prepend(e)}},{key:"createElementContent",value:function(e){return n=(t=e).id,i=t.img,r=t.name,'\n    <a href="#" class="friend-card" title="friend-name" data-id="'.concat(n,'">\n        <div class="friend__img-wrapper">\n            <img src="').concat(i,'" class="friend__img">\n        </div>    \n        <div class="friend__description">\n            <span class="friend__name">').concat(r,'</span>\n            <button class="button button--light friend__button">\n                Learn more\n            </button>\n        </div>    \n    </a>');var t,n,i,r}},{key:"createElt",value:function(e,t,n,i){return this.elt=document.createElement(e),this.elt.classList.add(t),this.elt.insertAdjacentHTML(n,i),this.elt}},{key:"removeElt",value:function(){this.elt.parentNode.removeChild(this.elt)}}],r&&n(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),t}();function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.elt=null,this.url=n,this.overlay=document.querySelector(".overlay"),this.closeElt=null,this.closeHandler=this.closeHandler.bind(this),this.callback=this.callback.bind(this),this.init()}var n,i;return n=t,i=[{key:"init",value:function(){return e(this.url,this.callback)}},{key:"callback",value:function(e){var t=this,n=e.find((function(e){return e.id===t.id}));this.appendElt(this.createElt(n)),this.overlay&&this.overlay.classList.add("overlay--active"),this.startEventListeners()}},{key:"appendElt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.querySelector("body");return t.append(e)}},{key:"startEventListeners",value:function(){this.closeElt=this.elt.querySelector(".popup__button"),this.overlay.addEventListener("click",this.closeHandler),this.closeElt.addEventListener("click",this.closeHandler)}},{key:"closeHandler",value:function(){this.overlay&&this.overlay.classList.remove("overlay--active"),this.overlay.removeEventListener("click",this.closeHandler),this.closeElt=null,this.elt.parentNode.removeChild(this.elt),this.elt=null}},{key:"createElt",value:function(e){var t,n,i,r,a,o,c,l,s,u;return this.elt=document.createElement("div"),this.elt.classList.add("popup"),this.elt.insertAdjacentHTML("beforeend",(n=(t=e).img,i=t.name,r=t.type,a=t.breed,o=t.description,c=t.age,l=t.inoculations,s=t.diseases,u=t.parasites,'\n        <button class="popup__button button-circle">\n            <svg width="12" height="12">\n                <use xlink:href="img/sprite.svg#icon-cross"></use>\n            </svg>\n        </button>\n        <div class="popup__img-wrapper">\n            <img class="popup__img" src="'.concat(n,'" alt="').concat(i,'">\n        </div>\n        <div class="popup__content">\n            <div class="popup__name">').concat(i,'</div>\n            <div class="popup__kind">').concat(r," - ").concat(a,'</div>\n            <div class="popup__text">').concat(o,'</div>\n            <ul class="popup__list">\n                <li class="popup__item">Age: <span>').concat(c,'</span></li>\n                <li class="popup__item">Inoculations: <span>').concat(l.join(", "),'</span></li>\n                <li class="popup__item">Diseases: <span>').concat(s.join(", "),'</span></li>\n                <li class="popup__item">Parasites: <span>').concat(u.join(", "),"</span></li>\n            </ul>\n        </div>\n    "))),this.elt}}],i&&r(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),t}();function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var c="http://localhost:3000/js/pets.json",l=document.querySelector(".slider__list");try{var s=document.querySelector(".js-toggler"),u=document.querySelector(".header__menu");s&&u&&function(e,t,n,i){var r=document.querySelector(".header"),a=document.querySelector(".overlay"),o=e;function c(e){t.contains(e.target)||l()}function l(){r.classList.remove("opened"),o.removeEventListener("click",l),a.removeEventListener("click",c),e.addEventListener("click",s),a.classList.remove("overlay--active")}function s(){var t;(t=document.querySelector(".opened"))&&t!==r&&t.classList.remove("opened"),r.classList.add("opened"),e.removeEventListener("click",s),o.addEventListener("click",l),a.addEventListener("click",c),a.classList.add("overlay--active")}e.addEventListener("click",s)}(s,u)}catch(e){console.log(e)}try{var d=document.querySelectorAll(".menu__link"),v=d.length;d.forEach((function(e,t){t!==v-1&&t!==v-2||("click",e.addEventListener("click",(function(e){e.preventDefault()})))}))}catch(e){console.log(e)}try{l.addEventListener("click",(function(e){var t=e.target.closest(".friend-card");if(t){e.preventDefault();var n=Number(t.dataset.id);new a(n,c)}}))}catch(e){console.log(e)}try{if(l){var p=function e(t){if(b.forEach((function(t){return t.removeEventListener("click",e)})),t.target.closest(".slider__arrow-right")){l.classList.add("transition-right"),console.log(m);for(var n=0;n<m;n++)l.append(l.children[0])}t.target.closest(".slider__arrow-left")&&l.classList.add("transition-left")},h=[],f=[],m=window.matchMedia("(max-width: 767px)").matches?1:window.matchMedia("(max-width: 1279px)").matches?2:3,y=2*m;e(c,(function(e){for(;h.length<y;){var n=t(1,e.length);if(!h.includes(n)){h.push(n);var r=e.find((function(e){return e.id===n})),a=new i(l,c,n);a.createTemplate(r),f.push(a)}}return h}));var b=document.querySelectorAll(".slider__arrow");b.forEach((function(e){return e.addEventListener("click",p)})),l.addEventListener("animationend",(function(n){var r;"move-left"===n.animationName&&l.classList.remove("transition-left"),"move-right"===n.animationName&&l.classList.remove("transition-right"),h.slice(0,m),h=h.slice(0,m),(r=f.slice(-m),function(e){if(Array.isArray(e))return o(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){e.removeElt()})),f=f.slice(0,m),e(c,(function(e){for(;h.length<y;){var n=t(1,e.length);if(!h.includes(n)){h.unshift(n);var r=e.find((function(e){return e.id===n})),a=new i(l,c,n);a.createTemplate(r,"before"),f.unshift(a)}}return h})),b.forEach((function(e){return e.addEventListener("click",p)}))}))}}catch(e){console.log(e)}})();