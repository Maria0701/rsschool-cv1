(()=>{"use strict";var e=function(e,t){return fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return t(e)}))},t=function(e,t){return Math.floor(Math.random()*(t-e)+e)};function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=document.querySelector("body"),i=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.elt=null,this.url=n,this.overlay=document.querySelector(".overlay"),this.closeElt=null,this.closeHandler=this.closeHandler.bind(this),this.callback=this.callback.bind(this),this.init()}var i,a;return i=t,a=[{key:"init",value:function(){return e(this.url,this.callback)}},{key:"callback",value:function(e){var t=this,n=e.find((function(e){return e.id===t.id}));this.appendElt(this.createElt(n)),r.classList.add("overflow-hidden"),this.overlay&&this.overlay.classList.add("overlay--active"),this.startEventListeners()}},{key:"appendElt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.overlay;return t.after(e)}},{key:"startEventListeners",value:function(){this.closeElt=this.elt.querySelector(".popup__button"),this.overlay.addEventListener("click",this.closeHandler),this.closeElt.addEventListener("click",this.closeHandler)}},{key:"closeHandler",value:function(){this.overlay&&this.overlay.classList.remove("overlay--active"),r.classList.remove("overflow-hidden"),this.overlay.removeEventListener("click",this.closeHandler),this.closeElt=null,this.elt.parentNode.removeChild(this.elt),this.elt=null}},{key:"createElt",value:function(e){var t,n,r,i,a,o,c,l,s,d;return this.elt=document.createElement("div"),this.elt.classList.add("popup"),this.elt.insertAdjacentHTML("beforeend",(n=(t=e).img,r=t.name,i=t.type,a=t.breed,o=t.description,c=t.age,l=t.inoculations,s=t.diseases,d=t.parasites,'\n        <button class="popup__button button-circle">\n            <svg width="12" height="12">\n                <use xlink:href="img/sprite.svg#icon-cross"></use>\n            </svg>\n        </button>\n        <div class="popup__img-wrapper">\n            <img class="popup__img" src="'.concat(n,'" alt="').concat(r,'">\n        </div>\n        <div class="popup__content">\n            <div class="popup__name">').concat(r,'</div>\n            <div class="popup__kind">').concat(i," - ").concat(a,'</div>\n            <div class="popup__text">').concat(o,'</div>\n            <ul class="popup__list">\n                <li class="popup__item">Age: <span>').concat(c,'</span></li>\n                <li class="popup__item">Inoculations: <span>').concat(l.join(", "),'</span></li>\n                <li class="popup__item">Diseases: <span>').concat(s.join(", "),'</span></li>\n                <li class="popup__item">Parasites: <span>').concat(d.join(", "),"</span></li>\n            </ul>\n        </div>\n    "))),this.elt}}],a&&n(i.prototype,a),Object.defineProperty(i,"prototype",{writable:!1}),t}();function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=document.querySelector("body");function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;c(this,t),this.container=e,this.url=n,this.id=r,this.elt=null,this.callback=this.callback.bind(this)}var n,r;return n=t,r=[{key:"init",value:function(){return e(this.url,this.callback)}},{key:"callback",value:function(e){var t=this,n=e.find((function(e){return e.id===t.id}));this.createTemplate(n)}},{key:"createTemplate",value:function(e){var t=e.pet,n=void 0===t?null:t,r=e.place,i=void 0===r?"after":r,a=e.tagName,o=void 0===a?"div":a,c=e.className,l=void 0===c?"slider__item":c,s=e.where,d=void 0===s?"beforeend":s,u=this.createElementContent(n),v=this.createElt(o,l,d,u);"before"===i?this.prependElt(v,this.container):this.appendElt(v,this.container)}},{key:"appendElt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.querySelector("body");return t.append(e)}},{key:"prependElt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.querySelector("body");return t.prepend(e)}},{key:"createElementContent",value:function(e){return n=(t=e).id,r=t.img,i=t.name,'\n    <a href="#" class="friend-card" title="friend-name" data-id="'.concat(n,'">\n        <div class="friend__img-wrapper">\n            <img src="').concat(r,'" class="friend__img">\n        </div>    \n        <div class="friend__description">\n            <span class="friend__name">').concat(i,'</span>\n            <button class="button button--light friend__button">\n                Learn more\n            </button>\n        </div>    \n    </a>');var t,n,r,i}},{key:"createElt",value:function(e,t,n,r){return this.elt=document.createElement(e),this.elt.classList.add(t),this.elt.insertAdjacentHTML(n,r),this.elt}},{key:"removeElt",value:function(){this.elt.parentNode.removeChild(this.elt)}}],r&&l(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),d=function(e){var t;switch(e){case"slider":t=window.matchMedia("(max-width: 767px)").matches?1:window.matchMedia("(max-width: 1279px)").matches?2:3;break;case"catalog":t=window.matchMedia("(max-width: 767px)").matches?3:window.matchMedia("(max-width: 1279px)").matches?6:8;break;default:alert("Нет таких значений")}return t};function u(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p="http://localhost:3000/js/pets.json",h=document.querySelector(".slider__list");try{var m=document.querySelector(".js-toggler"),y=document.querySelector(".header__menu");m&&y&&function(e,t,n,r){var i,c=document.querySelector(".header"),l=document.querySelector(".overlay"),s=e,d=function(e){if(Array.isArray(e))return a(e)}(i=c.querySelectorAll(".menu__link"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();function u(e){t.contains(e.target)||v()}function v(){c.classList.remove("opened"),o.classList.remove("overflow-hidden"),s.removeEventListener("click",v),l.removeEventListener("click",u),e.addEventListener("click",f),l.classList.remove("overlay--active")}function f(){var t;(t=document.querySelector(".opened"))&&t!==c&&t.classList.remove("opened"),o.classList.add("overflow-hidden"),c.classList.add("opened"),e.removeEventListener("click",f),s.addEventListener("click",v),l.addEventListener("click",u),l.classList.add("overlay--active")}d[d.length-1].addEventListener("click",(function(e){e.preventDefault(),v();var t=d[d.length-1].getAttribute("href");document.querySelector(t).scrollIntoView({behavior:"smooth",block:"start"})})),e.addEventListener("click",f)}(m,y)}catch(e){console.log(e)}try{var b=document.querySelectorAll(".menu__link"),g=b.length;b.forEach((function(e,t){t===g-2&&("click",e.addEventListener("click",(function(e){e.preventDefault()})))}))}catch(e){console.log(e)}try{h&&h.addEventListener("click",(function(e){var t=e.target.closest(".friend-card");if(t){e.preventDefault();var n=Number(t.dataset.id);new i(n,p)}}))}catch(e){console.log(e)}try{h&&function(n,r){var i=[],a=[],o=d("slider"),c=2*o;e(r,(function(e){for(;i.length<c;){var r=t(1,e.length);if(!i.includes(r)){i.push(r);var o=e.find((function(e){return e.id===r})),l=new s(n);l.createTemplate({pet:o,tagName:"div",className:"slider__item"}),a.push(l)}}return i}));var l=document.querySelectorAll(".slider__arrow");function u(e){if(l.forEach((function(e){return e.removeEventListener("click",u)})),e.target.closest(".slider__arrow-right")){n.classList.add("transition-right"),console.log(o);for(var t=0;t<o;t++)n.append(n.children[0])}e.target.closest(".slider__arrow-left")&&n.classList.add("transition-left")}l.forEach((function(e){return e.addEventListener("click",u)})),n.addEventListener("animationend",(function(d){var v;"move-left"===d.animationName&&n.classList.remove("transition-left"),"move-right"===d.animationName&&n.classList.remove("transition-right"),i.slice(0,o),i=i.slice(0,o),(v=a.slice(-o),function(e){if(Array.isArray(e))return f(e)}(v)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(v)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(v)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){e.removeElt()})),a=a.slice(0,o),e(r,(function(e){for(;i.length<c;){var o=t(1,e.length);if(!i.includes(o)){i.unshift(o);var l=e.find((function(e){return e.id===o})),d=new s(n,r,o);d.createTemplate({pet:l,place:"before",tagName:"div",className:"slider__item"}),a.unshift(d)}}return i})),l.forEach((function(e){return e.addEventListener("click",u)}))}))}(h,p)}catch(e){console.log(e)}try{var E=document.querySelector(".catalog__cards"),k=document.querySelector(".pagination");E&&(E.innerHTML="",function(t,n){var r=d("catalog"),i=n.querySelector(".first"),a=n.querySelector(".last"),o=n.querySelector(".prev"),c=n.querySelector(".next"),l=n.querySelector(".num"),v=1,f=r,p=48/f,h=1,m=[],y=[],b=function(e){for(var t=h;t<=f*v;t++){var n=e[t-1];g(n)}},g=function(e){var n=new s(t);y.push(n),n.createTemplate({pet:e,tagName:"article",className:"catalog__card"})};e("http://localhost:3000/js/pets.json",(function(e){return m=[].concat(u(e),u(e),u(e),u(e),u(e),u(e)),t=r,n=[],i=[],m.forEach((function(e,r){i.push(e),(r+1)%t==0&&(n=[].concat(u(n),u(function(e){return e.sort((function(){return Math.random()-.5}))}(i))),i=[])})),m=n;var t,n,i})).then((function(e){m=e,b(e)}));var E=function(e){t.classList.remove("transition-top"),u(y.slice(0,f)).forEach((function(e){e.removeElt(),y.shift()}))},k=function e(n){n.preventDefault(),t.classList.add("transition-top"),t.addEventListener("animationend",E);var r=n.target;switch(!0){case c.contains(r):v++,h+=f;break;case o.contains(r):v--,h-=f;break;case i.contains(r):v=1,h=1;break;case a.contains(r):v=p,h=48-f+1}v>1&&(i.dataset.disabled=!1,o.dataset.disabled=!1,c.addEventListener("click",e),o.addEventListener("click",e),i.addEventListener("click",e),a.addEventListener("click",e)),v<p&&(a.dataset.disabled=!1,c.dataset.disabled=!1,c.addEventListener("click",e),o.addEventListener("click",e),i.addEventListener("click",e),a.addEventListener("click",e)),v===p&&(a.dataset.disabled=!0,c.dataset.disabled=!0,c.removeEventListener("click",e),a.removeEventListener("click",e)),1===v&&(o.dataset.disabled=!0,i.dataset.disabled=!0,o.removeEventListener("click",e),i.removeEventListener("click",e)),l.innerText=v,b(m)};c.addEventListener("click",k),a.addEventListener("click",k)}(E,k),E.addEventListener("click",(function(e){var t=e.target.closest(".friend-card");if(t){e.preventDefault();var n=Number(t.dataset.id);new i(n,p)}})))}catch(e){console.log(e)}})();