(()=>{"use strict";var e=function(e,t){return fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return t(e)}))},t=function(e,t){return Math.floor(Math.random()*(t-e)+e)};function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=document.querySelector("body"),i=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.elt=null,this.url=n,this.overlay=document.querySelector(".overlay"),this.closeElt=null,this.closeHandler=this.closeHandler.bind(this),this.callback=this.callback.bind(this),this.init()}var i,a;return i=t,a=[{key:"init",value:function(){return e(this.url,this.callback)}},{key:"callback",value:function(e){var t=this,n=e.find((function(e){return e.id===t.id}));this.appendElt(this.createElt(n)),r.classList.add("overflow-hidden"),this.overlay&&this.overlay.classList.add("overlay--active"),this.startEventListeners()}},{key:"appendElt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.overlay;return t.after(e)}},{key:"startEventListeners",value:function(){this.closeElt=this.elt.querySelector(".popup__button"),this.overlay.addEventListener("click",this.closeHandler),this.closeElt.addEventListener("click",this.closeHandler)}},{key:"closeHandler",value:function(){this.overlay&&this.overlay.classList.remove("overlay--active"),r.classList.remove("overflow-hidden"),this.overlay.removeEventListener("click",this.closeHandler),this.closeElt=null,this.elt.parentNode.removeChild(this.elt),this.elt=null}},{key:"createElt",value:function(e){var t,n,r,i,a,o,c,s,l,d;return this.elt=document.createElement("div"),this.elt.classList.add("popup"),this.elt.insertAdjacentHTML("beforeend",(n=(t=e).img,r=t.name,i=t.type,a=t.breed,o=t.description,c=t.age,s=t.inoculations,l=t.diseases,d=t.parasites,'\n        <button class="popup__button button-circle">\n            <svg width="12" height="12">\n                <use xlink:href="img/sprite.svg#icon-cross"></use>\n            </svg>\n        </button>\n        <div class="popup__img-wrapper">\n            <img class="popup__img" src="'.concat(n,'" alt="').concat(r,'">\n        </div>\n        <div class="popup__content">\n            <div class="popup__name">').concat(r,'</div>\n            <div class="popup__kind">').concat(i," - ").concat(a,'</div>\n            <div class="popup__text">').concat(o,'</div>\n            <ul class="popup__list">\n                <li class="popup__item">Age: <span>').concat(c,'</span></li>\n                <li class="popup__item">Inoculations: <span>').concat(s.join(", "),'</span></li>\n                <li class="popup__item">Diseases: <span>').concat(l.join(", "),'</span></li>\n                <li class="popup__item">Parasites: <span>').concat(d.join(", "),"</span></li>\n            </ul>\n        </div>\n    "))),this.elt}}],a&&n(i.prototype,a),Object.defineProperty(i,"prototype",{writable:!1}),t}();function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=document.querySelector("body");function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;c(this,t),this.container=e,this.url=n,this.id=r,this.elt=null,this.callback=this.callback.bind(this)}var n,r;return n=t,r=[{key:"init",value:function(){return e(this.url,this.callback)}},{key:"callback",value:function(e){var t=this,n=e.find((function(e){return e.id===t.id}));this.createTemplate(n)}},{key:"createTemplate",value:function(e){var t=e.pet,n=void 0===t?null:t,r=e.place,i=void 0===r?"after":r,a=e.tagName,o=void 0===a?"div":a,c=e.className,s=void 0===c?"slider__item":c,l=e.where,d=void 0===l?"beforeend":l,u=this.createElementContent(n),v=this.createElt(o,s,d,u);"before"===i?this.prependElt(v,this.container):this.appendElt(v,this.container)}},{key:"appendElt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.querySelector("body");return t.append(e)}},{key:"prependElt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.querySelector("body");return t.prepend(e)}},{key:"createElementContent",value:function(e){return n=(t=e).id,r=t.img,i=t.name,'\n    <a href="#" class="friend-card" title="friend-name" data-id="'.concat(n,'">\n        <div class="friend__img-wrapper">\n            <img src="').concat(r,'" class="friend__img">\n        </div>    \n        <div class="friend__description">\n            <span class="friend__name">').concat(i,'</span>\n            <button class="button button--light friend__button">\n                Learn more\n            </button>\n        </div>    \n    </a>');var t,n,r,i}},{key:"createElt",value:function(e,t,n,r){return this.elt=document.createElement(e),this.elt.classList.add(t),this.elt.insertAdjacentHTML(n,r),this.elt}},{key:"removeElt",value:function(){this.elt.parentNode.removeChild(this.elt)}}],r&&s(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),d=function(e){var t;switch(e){case"slider":t=window.matchMedia("(max-width: 767px)").matches?1:window.matchMedia("(max-width: 1279px)").matches?2:3;break;case"catalog":t=window.matchMedia("(max-width: 767px)").matches?3:window.matchMedia("(max-width: 1279px)").matches?6:8;break;default:alert("Нет таких значений")}return t};function u(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p="./js/pets.json",h=document.querySelector(".slider__list");try{var m=document.querySelector(".js-toggler"),y=document.querySelector(".header__menu");m&&y&&function(e,t,n,r){var i,c=document.querySelector(".header"),s=document.querySelector(".overlay"),l=e,d=function(e){if(Array.isArray(e))return a(e)}(i=c.querySelectorAll(".menu__link"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();function u(e){t.contains(e.target)||v()}function v(){c.classList.remove("opened"),o.classList.remove("overflow-hidden"),l.removeEventListener("click",v),s.removeEventListener("click",u),e.addEventListener("click",f),s.classList.remove("overlay--active"),d.forEach((function(e){return e.removeEventListener("click",p)}))}function f(){var t;(t=document.querySelector(".opened"))&&t!==c&&t.classList.remove("opened"),o.classList.add("overflow-hidden"),c.classList.add("opened"),e.removeEventListener("click",f),l.addEventListener("click",v),s.addEventListener("click",u),s.classList.add("overlay--active"),d.forEach((function(e){return e.addEventListener("click",p)}))}function p(e){var t=e.target.closest(".menu__link");if(t.classList.contains("menu__link--active"))v();else{var n=t.getAttribute("href");n.startsWith("#")&&(e.preventDefault(),v(),document.querySelector(n).scrollIntoView({behavior:"smooth",block:"start"}))}}e.addEventListener("click",f)}(m,y)}catch(e){console.log(e)}try{h&&h.addEventListener("click",(function(e){var t=e.target.closest(".friend-card");if(t){e.preventDefault();var n=Number(t.dataset.id);new i(n,p)}}))}catch(e){console.log(e)}try{h&&function(n,r){var i=[],a=[],o=d("slider"),c=2*o;e(r,(function(e){for(;i.length<c;){var r=t(1,e.length);if(!i.includes(r)){i.push(r);var o=e.find((function(e){return e.id===r})),s=new l(n);s.createTemplate({pet:o,tagName:"div",className:"slider__item"}),a.push(s)}}return i}));var s=document.querySelectorAll(".slider__arrow");function u(e){if(s.forEach((function(e){return e.removeEventListener("click",u)})),e.target.closest(".slider__arrow-right")){n.classList.add("transition-right"),console.log(o);for(var t=0;t<o;t++)n.append(n.children[0])}e.target.closest(".slider__arrow-left")&&n.classList.add("transition-left")}s.forEach((function(e){return e.addEventListener("click",u)})),n.addEventListener("animationend",(function(d){var v;"move-left"===d.animationName&&n.classList.remove("transition-left"),"move-right"===d.animationName&&n.classList.remove("transition-right"),i.slice(0,o),i=i.slice(0,o),(v=a.slice(-o),function(e){if(Array.isArray(e))return f(e)}(v)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(v)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(v)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){e.removeElt()})),a=a.slice(0,o),e(r,(function(e){for(;i.length<c;){var o=t(1,e.length);if(!i.includes(o)){i.unshift(o);var s=e.find((function(e){return e.id===o})),d=new l(n,r,o);d.createTemplate({pet:s,place:"before",tagName:"div",className:"slider__item"}),a.unshift(d)}}return i})),s.forEach((function(e){return e.addEventListener("click",u)}))}))}(h,p)}catch(e){console.log(e)}try{var b=document.querySelector(".catalog__cards"),g=document.querySelector(".pagination");b&&(b.innerHTML="",function(t,n,r){var i=d("catalog"),a=n.querySelector(".first"),o=n.querySelector(".last"),c=n.querySelector(".prev"),s=n.querySelector(".next"),v=n.querySelector(".num"),f=1,p=i,h=48/p,m=1,y=[],b=[],g=function(e){for(var t=m;t<=p*f;t++){var n=e[t-1];E(n)}},E=function(e){var n=new l(t);b.push(n),n.createTemplate({pet:e,tagName:"article",className:"catalog__card"})};e("./js/pets.json",(function(e){return y=[].concat(u(e),u(e),u(e),u(e),u(e),u(e)),t=i,n=[],r=[],y.forEach((function(e,i){r.push(e),(i+1)%t==0&&(n=[].concat(u(n),u(function(e){return e.sort((function(){return Math.random()-.5}))}(r))),r=[])})),console.log(n),y=n;var t,n,r})).then((function(e){y=e,g(e)}));var k=function(e){t.classList.remove("transition-top"),u(b.slice(0,p)).forEach((function(e){e.removeElt(),b.shift()}))},_=function e(n){n.preventDefault(),t.classList.add("transition-top"),t.addEventListener("animationend",k);var r=n.target;switch(!0){case s.contains(r):f++,m+=p;break;case c.contains(r):f--,m-=p;break;case a.contains(r):f=1,m=1;break;case o.contains(r):f=h,m=48-p+1}f>1&&(a.dataset.disabled=!1,c.dataset.disabled=!1,s.addEventListener("click",e),c.addEventListener("click",e),a.addEventListener("click",e),o.addEventListener("click",e)),f<h&&(o.dataset.disabled=!1,s.dataset.disabled=!1,s.addEventListener("click",e),c.addEventListener("click",e),a.addEventListener("click",e),o.addEventListener("click",e)),f===h&&(o.dataset.disabled=!0,s.dataset.disabled=!0,s.removeEventListener("click",e),o.removeEventListener("click",e)),1===f&&(c.dataset.disabled=!0,a.dataset.disabled=!0,c.removeEventListener("click",e),a.removeEventListener("click",e)),v.innerText=f,g(y)};s.addEventListener("click",_),o.addEventListener("click",_)}(b,g),b.addEventListener("click",(function(e){var t=e.target.closest(".friend-card");if(t){e.preventDefault();var n=Number(t.dataset.id);new i(n,p)}})))}catch(e){console.log(e)}})();